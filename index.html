<html>
<head>
    <meta charset="UTF-8">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <title>Document</title>
</head>
<body>
    <div class="container">
        <h2>Introduction to firebase</h2>
        <input type="text" class="form-control" placeholder="Type in here">
        <a href="#" class="btn btn-primary">Submit</a>
        <ul class="list-group">
        </ul>
    </div>

    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.1.3/firebase.js"></script>
    <script>
        $(function() {
            var input = $('input');
            var button = $('a');
            var ul = $('ul');
            var config = {
                databaseURL: "https://fir-tutorial-4a204.firebaseio.com/"
            };
            firebase.initializeApp(config);
            var commentsRef = firebase.database().ref('/').child('comments');
            listenToFirebase();

            button.click(function() {
                var text = input.val();
                commentsRef.push(text);
                input.val('');
            });

            function addToList(text) {
                var li = '<li class="list-group-item" >' + text + '</li>';
                ul.append(li);
            }

            function listenToFirebase() {
                commentsRef.on('value', function(snapshot) {
                    var comments = snapshot.val();
                    var i = 1;

                    $.each(comments, function(index, c) { 
                        addToList(parseInt(i) + ': ' + c);
                        i++;
                    })
                });
            }

        });
    </script>
</body>
</html>